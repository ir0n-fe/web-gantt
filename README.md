# ガントチャートツール

このプロジェクトは `index.html` をダブルクリックで起動できる、ビルド不要のローカルガントチャートです。データは基本的にブラウザ内で保持され、外部 API へのデータ送信は行いません（ライブラリ読み込みに限り CDN 利用）。

## 構成ファイル

- `index.html` : 画面構成（テーブル、ガント、モーダル）
- `styles.css` : ライトテーマのフラットUIスタイル
- `app.js` : 全ロジック（データ管理、スケジュール計算、描画、保存、インポート/エクスポート）
- `README.md` : 本説明書

## 主な機能

- タスク管理（200〜500件を想定）
  - 項目: `title`, `category`, `assignee`, `status`, `start`, `end`, `duration`, `dependencies`, `notes`
  - 依存種別: `FS`, `SS`, `FF`, `SF`
  - 依存ループ検知（循環は拒否）
  - 依存変更時に自動再計算（後続タスクへ連鎖）
  - 進捗状態: `未設定`, `進行中`, `完了`
  - マイルストーン対応（1日）
- カレンダー（営業日）
  - 週末と祝日を非稼働日として扱う
  - 祝日はモーダルから追加・削除・インポート・エクスポート可能
- ガント表示
  - 左: タスクリスト、右: ガントチャート
  - タスクバーのドラッグ移動・端ドラッグによる期間変更
  - 依存線の可視化（FS 依存）
  - 今日の縦線、週末/祝日の視覚区別
- 表操作
  - テキスト検索、分類フィルタ、担当フィルタ
  - 列ヘッダークリックでソート
  - 手動行並べ替え（ドラッグ）
- 画面操作
  - 左右ペイン切替（同時非表示不可）
  - ペイン幅の可変（ドラッグでリサイズ）
  - 右側のズーム調整
- Undo / Redo
  - データ変更のみ対象
  - 履歴上限: 100件前後
  - ショートカット: `Ctrl+Z` / `Ctrl+Y` / `Ctrl+Shift+Z`
- 永続化
  - 優先: IndexedDB
  - フォールバック: localStorage
  - IndexedDB不可時は localStorage へ切替、または保存方式の案内
- インポート / エクスポート
  - JSON（`schemaVersion` 含む）全置換インポート
  - Mermaid ガントチャートのインポート/エクスポート
  - 祝日設定のインポート/エクスポート
- 初期化
  - 現在データをリセットして新規チャートを作成

## キーボードショートカット

- `Ctrl + N` : タスク追加
- `Ctrl + Z` : Undo
- `Ctrl + Y` / `Ctrl + Shift + Z` : Redo
- `Ctrl + F` : 検索ボックスにフォーカス
- `Ctrl + M` : Mermaid 入出力モーダルを開く
- `Ctrl + S` : JSON エクスポート

## Mermaid 連携の仕様

- グループ化: `分類` / `担当` を選択可能
- 依存情報は FS のみ `after` で出力
- `SS/FF/SF` とメモは Mermaid 出力対象外
- 週末と祝日を `excludes` に反映
- 期間を出力するか終了日を優先するかを選択可能
- マイルストーン、進捗 (`active` / `done`) も出力に反映

## JSON 仕様（保存・エクスポート）

`schemaVersion` を含みます。

- `schemaVersion`
- `tasks`
  - `id`
  - `title`
  - `category`
  - `assignee`
  - `status` (`none` / `active` / `done`)
  - `start` (`YYYY-MM-DD`)
  - `end` (`YYYY-MM-DD`)
  - `duration`
  - `dependencies` (例: `[{ "id": "task-id", "type": "FS" }]`)
  - `notes`
  - `isMilestone`
- `holidays` (`YYYY-MM-DD` 配列)
- `manualOrder`（手動並び順）

## 使い方（起動）

1. `index.html` をダブルクリックして開く（または `file://` で開く）
2. タスク追加ボタンで入力を開始
3. 依存関係や日付を設定（必要に応じて祝日を追加）
4. 自動保存されるため、再読込しても状態を保持

## 外部ライブラリ

CDN 読み込み（ESM import 不使用）:

- dayjs
- Dexie

## ライセンス

必要に応じて記載してください（例: `MIT`）。
